<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>暗黑大天使</title>
    <meta name="keywords" content="阅文集团,阅文游戏,暗黑大天使" />
    <meta name="description" content="暗黑大天使,阅文集团,阅文游戏" />
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <meta name="author" content="seven@yuewen" />
</head>
<body>
<section class="c_wrap">
    <div class="c_inner_content">
        <div class="c_cont">
            <nav class="n_wrap">
                <a href="#" class="nb_start" title="开始游戏" target="_blank">开始游戏</a>
                <a href="javascript:void(0);" class="n_btn" title="英雄再起">英雄再起</a>
                <a href="javascript:void(0);" class="n_btn" title="英雄重生">英雄重生</a>
                <a href="javascript:void(0);" class="n_btn" title="重整山河">重整山河</a>
                <a href="javascript:void(0);" class="n_btn" title="厚积薄发">厚积薄发</a>
                <a href="javascript:void(0);" class="n_btn" title="英雄进击">英雄进击</a>
            </nav>
            <ul class="c_list">
                <li class="c_item c_1">
                    <div class="c_info">
                        <div class="top_header">
                            <img src="img/logo.png" alt="logo" />
                            <span>
                                <button>登陆</button>
                                <button>注册</button>
                                <button>游戏平台</button>
                            </span>
                        </div>
                        <img src="img/act_1/bg.jpg" alt="bg" />
                        <div class="ci_logo action_5"></div>
                        <div class="ci_body">
                            <img src="img/act_1/fg.png" class="action_5" alt="fg" />
                            <img src="img/act_1/message_bg.png" class="ci_message_bg action_5" alt="message" />
                            <div class="ci_message">
                                <p class="ci_message_remind action_6">
                                    <span>活 动 时 间</span>
                                    <span>10.23 — 10.26</span>
                                </p>
                                <img src="img/act_1/message_title.png" alt="title" class="action_7" />
                                <div class="ci_message_detail action_8">
                                    <div>
                                        <p>不知不觉，在您的陪伴下，暗黑大天使已经度过了一个夏天，为了回馈广大新老玩家的支持，</p>
                                        <p>我们特地为大家准备了本次福利活动，10月23日-10月26日期间，进入暗黑大天使起点30服</p>
                                        <p>的英雄可通过完成大天使再起旅途，获得珍贵道具。一起踏上征程吧！</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="c_item c_2">
                    <div class="c_info">
                        <img src="img/act_2/bg.jpg" alt="bg" />
                        <div class="ci_body">
                            <img src="img/act_2/fg.png" class="action_7" alt="fg" />
                            <div class="ci_message_common">
                                <div class="ci_message_title action_6"></div>
                                <div class="ci_message_detail action_7">
                                    <p><span>英</span>雄在游戏中创建角色，即刻获得强攻宝石！</p>
                                </div>
                                <div class="ci_message_detail action_8">
                                    <a href="javascript:void(0)" class="ci_view">查看领取记录</a>
                                    <div class="ci_message_button"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="c_item c_3">
                    <div class="c_info">
                        <img src="img/act_3/bg.jpg" alt="bg" />
                        <div class="ci_body">
                            <img src="img/act_3/fg.png" class="action_5" alt="fg" />
                            <div class="ci_message_common">
                                <div class="ci_message_title action_6"></div>
                                <div class="ci_message_detail action_7">
                                    <p><span>累</span>计2日登陆，将被授予珍贵玛雅之石！</p>
                                </div>
                                <div class="ci_message_detail action_8">
                                    <a href="javascript:void(0)" class="ci_view">查看领取记录</a>
                                    <div class="ci_message_button"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="c_item c_4">
                    <div class="c_info">
                        <img src="img/act_4/bg.jpg" alt="bg" />
                        <div class="ci_body">
                            <img src="img/act_4/fg.png" class="action_7" alt="fg" />
                            <div class="ci_message_common">
                                <div class="ci_message_title action_6"></div>
                                <div class="ci_message_detail action_7">
                                    <p><span>在</span>游戏中充值1元，立刻拥有卓越的破甲符文！</p>
                                </div>
                                <div class="ci_message_detail action_8">
                                    <div class="ci_message_button"></div>
                                </div>
                                <div class="ci_message_detail action_9">
                                    <a href="javascript:void(0)" class="ci_view">查看领取记录</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="c_item c_5">
                    <div class="c_info">
                        <img src="img/act_5/bg.jpg" alt="bg" />
                        <div class="ci_body">
                            <img src="img/act_5/fg.png" class="action_5" alt="fg" />
                            <div class="ci_message_common">
                                <div class="ci_message_title action_6"></div>
                                <div class="ci_message_detail action_7">
                                    <p><span>在</span>游戏中累积登陆3日，四阶单卓越毒戒指助你飞升！</p>
                                </div>
                                <div class="ci_message_detail action_8">
                                    <div class="ci_message_button"></div>
                                    <a href="javascript:void(0)" class="ci_view">查看领取记录</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</section>
<footer>
    <p>上海玄霆娱乐信息科技有限公司 增值电信业务经营许可证沪B2-20080046 文网文[2008]149号</p>
    <p>浙网文[2011]0472-052号 浙ICP备11011277号 京新出音[2011]530号 文网游备字（2011）W-RPG112号 软著登字第0291117号</p>
    <p>Copyright 2004-2019 All rights reserved.</p>
</footer>
<div class="c_cover"></div>
<div class="c_dialog">
    <img src="img/dialog_close.png" class="c_dialog_close" />
    <div class="c_dialog_body">

    </div>

</div>
<script type="text/javascript" src="http://img.qidian.com/v2/plugin/jquery/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="js/jquery.mousewheel.min.js"></script>
<script>


    const action = $("[class*=action]");


    action.each(function () {
        const _this = $(this);
        this.classList.forEach(item => {
            if (item.indexOf('action') === 0) {
                const seq = item.split('_');
                const duration = seq.length === 2 ? seq[1] : 1;
                _this.css('animation-duration', `${duration * 200}ms`);
            }
        });
    });




    // 切换活动内容
    var nBtn = $('.n_btn'),
        cItem = $('.c_item');

    nBtn.on('click',function(){
        const _index = $(this).index() - 1;  // 第一个button为开始游戏

        showAction(_index + 1);
    });

    var nbTop = $('.nb_top');

    nbTop.on('click',function(){
        var _this = $(this);

        $('html,body').animate({ scrollTop:0 },800)

    });


    // 初始化页面高度

    // 动画初始化
    showAction();

    function showAction(index = 1) {   //页面编号 index，从1开始
        const _list = $('.c_list');

        let totalCItemHeight = 0;

        for (let i = 0; i < index - 1; i++) {
            totalCItemHeight += _list.children().eq(i).height();
        }


        // $('html,body').animate({ scrollTop:_pos },800);
        _list.animate({ top: -totalCItemHeight }, 800);



        const nav = $('.n_wrap');
        nav.children().removeClass('sel');
        nav.children().eq(index).addClass('sel');

        $('.c_item').each(function () {
            const _this = $(this),
                _index = _this.index();
            const even = !(_index % 2);
            if (_index === index - 1) {
                _this.find("[class*=action]").addClass(even ? 'slideInLeft' : 'slideInUp');
            } else {
                _this.find("[class*=action]").removeClass(even ? 'slideInLeft' : 'slideInUp');
            }
        });
        $('html,body').animate({ scrollTop: 0 }, 800);
    }

    //  防抖
    let debounceScroll = null;

    $('.c_cont').mousewheel(function(event) {

        if (debounceScroll !== null) {
            clearTimeout(debounceScroll);
        }

        debounceScroll = setTimeout(function () {
            const nav = $('.n_wrap');

            const totalPageLength = nav.children('.n_btn').length;

            let currentActive = nav.find('.sel').index();

            if (event.deltaY < 0 && currentActive !== totalPageLength && currentActive > 0) { // 向下滚动
                showAction(currentActive + 1);
            } else if (event.deltaY < 0 && currentActive === totalPageLength) {
                $('html,body').animate({ scrollTop: $(document).height() }, 800);
                nav.children().removeClass('sel');
                currentActive = -1;
            } else if (event.deltaY > 0 && currentActive > 0 && currentActive !== 1) {
                showAction(currentActive - 1);
            } else if (event.deltaY > 0 && currentActive < 0) {
                currentActive = totalPageLength;
                showAction(totalPageLength);
            }

            // 初始化页面高度
            let currentPageHeight = currentActive > 0 ? Math.max($('.c_list').children().eq(currentActive - 1).height(), 1270) : '';
            $('.c_wrap').css({ height: currentPageHeight });

        }, 100);


    });


//     function scrollInit(e) {
//         e.preventDefault();
//         return false;
//     }

//     window.addEventListener('mousewheel', scrollInit, { passive: false });

    $('.c_cont').mousewheel(function (event) {
      if (!$(event.target).parents().hasClass('dialog')) {
        event.preventDefault();
        return false;
      }
      event.stopPropagation();
      return true;
    });

    $('.ci_message_button').click(function () {
        showDialog();
    });

    $('.ci_view').click(function () {
        showDialog();
    });


    function showDialog () {
        const _dialog = $('.c_dialog');
        const cItemHeight = $('.c_list').children().eq(1).height();

        var pos = $(document).scrollTop();

        _dialog.css('top', `${cItemHeight / 2 + pos - _dialog.height() / 2}px`);

        $('.c_cover').show();
        _dialog.show();
    }

    $('.c_dialog_close').click(function () {
        $('.c_dialog').hide();
        $('.c_cover').hide();
    })



</script>
</body>
</html>
